rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ... ê¸°ì¡´ ê·œì¹™ë“¤ ...

    // ì‚¬ìš©ì ë°ì´í„° ê·œì¹™
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;

      // ğŸ‘‡ [ì¶”ê°€] ë³¸ì¸ì˜ ì‹œì²­ ê¸°ë¡(viewHistory)ì€ ë³¸ì¸ë§Œ ì½ê³  ì“¸ ìˆ˜ ìˆë‹¤.
      match /viewHistory/{historyId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
    }
    
    // ...
  }
}
