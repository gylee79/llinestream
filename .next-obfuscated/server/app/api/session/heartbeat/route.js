(function(_0x4382de,_0x12690c){const _0x2d7d50=a34_0x4156,_0x16f44c=_0x4382de();while(!![]){try{const _0x49e0b3=parseInt(_0x2d7d50(0xd6))/0x1+-parseInt(_0x2d7d50(0x10a))/0x2+-parseInt(_0x2d7d50(0xf8))/0x3+-parseInt(_0x2d7d50(0x114))/0x4+-parseInt(_0x2d7d50(0xfd))/0x5+-parseInt(_0x2d7d50(0xc9))/0x6*(parseInt(_0x2d7d50(0xd7))/0x7)+parseInt(_0x2d7d50(0xe7))/0x8*(parseInt(_0x2d7d50(0x110))/0x9);if(_0x49e0b3===_0x12690c)break;else _0x16f44c['push'](_0x16f44c['shift']());}catch(_0x267ad2){_0x16f44c['push'](_0x16f44c['shift']());}}}(a34_0x58f7,0xd9e81));const a34_0x368c19=(function(){let _0x43d564=!![];return function(_0x4b4c8e,_0x4439c7){const _0x18fbe3=_0x43d564?function(){const _0x5a9a66=a34_0x4156;if(_0x4439c7){const _0x41391c=_0x4439c7[_0x5a9a66(0x104)](_0x4b4c8e,arguments);return _0x4439c7=null,_0x41391c;}}:function(){};return _0x43d564=![],_0x18fbe3;};}()),a34_0x8e99ea=a34_0x368c19(this,function(){const _0x120246=a34_0x4156;return a34_0x8e99ea[_0x120246(0xe9)]()['search'](_0x120246(0xd9))[_0x120246(0xe9)]()[_0x120246(0xc6)](a34_0x8e99ea)[_0x120246(0x108)](_0x120246(0xd9));});function a34_0x4156(_0x1938a5,_0x51f91b){_0x1938a5=_0x1938a5-0xbf;const _0x2289cd=a34_0x58f7();let _0x8e99ea=_0x2289cd[_0x1938a5];return _0x8e99ea;}a34_0x8e99ea();'use strict';((()=>{const _0x3df5c4=a34_0x4156;var _0x2752b2={};_0x2752b2['id']=0x94c,_0x2752b2[_0x3df5c4(0x107)]=[0x94c],_0x2752b2[_0x3df5c4(0xcc)]={0x1695d:_0xde9b65=>{const _0x46fdcd=_0x3df5c4;_0xde9b65[_0x46fdcd(0xe4)]=require('firebase-admin');},0x4faf:_0x3945cb=>{const _0x29d950=_0x3df5c4;_0x3945cb[_0x29d950(0xe4)]=require(_0x29d950(0xda));},0x7735:_0x4a0949=>{const _0x119d4b=_0x3df5c4;_0x4a0949['exports']=require(_0x119d4b(0xc5));},0x14b22:_0x549e48=>{const _0x9930a=_0x3df5c4;_0x549e48[_0x9930a(0xe4)]=require(_0x9930a(0xe5));},0xcbf:_0x1c2140=>{const _0x1529f3=_0x3df5c4;_0x1c2140[_0x1529f3(0xe4)]=import('firebase-admin/app');},0x11ce1:_0x936de=>{const _0x4fc259=_0x3df5c4;_0x936de[_0x4fc259(0xe4)]=import(_0x4fc259(0xbf));},0x11411:(_0x3fe09a,_0x5ca67e,_0x3bc2de)=>{_0x3bc2de['a'](_0x3fe09a,async(_0x59882f,_0x1a86d2)=>{const _0x3fc0d1=a34_0x4156;try{_0x3bc2de['r'](_0x5ca67e),_0x3bc2de['d'](_0x5ca67e,{'originalPathname':()=>_0x6fe517,'patchFetch':()=>_0x1be87e,'requestAsyncStorage':()=>_0x49e706,'routeModule':()=>_0x205d0e,'serverHooks':()=>_0x4897be,'staticGenerationAsyncStorage':()=>_0x3d1e12});var _0x104fb9=_0x3bc2de(0xc097),_0x326c72=_0x3bc2de(0x15a8c),_0x202795=_0x3bc2de(0xecfe),_0x34a6fb=_0x3bc2de(0x16ffc),_0x206ed6=_0x59882f([_0x34a6fb]);_0x34a6fb=(_0x206ed6[_0x3fc0d1(0x101)]?(await _0x206ed6)():_0x206ed6)[0x0];let _0x205d0e=new _0x104fb9['AppRouteRouteModule']({'definition':{'kind':_0x326c72['x'][_0x3fc0d1(0xc0)],'page':_0x3fc0d1(0xc1),'pathname':_0x3fc0d1(0x113),'filename':'route','bundlePath':'app/api/session/heartbeat/route'},'resolvedPagePath':_0x3fc0d1(0xde),'nextConfigOutput':'','userland':_0x34a6fb}),{requestAsyncStorage:_0x49e706,staticGenerationAsyncStorage:_0x3d1e12,serverHooks:_0x4897be}=_0x205d0e,_0x6fe517='/api/session/heartbeat/route';function _0x1be87e(){return(0x0,_0x202795['patchFetch'])({'serverHooks':_0x4897be,'staticGenerationAsyncStorage':_0x3d1e12});}_0x1a86d2();}catch(_0x5a77ed){_0x1a86d2(_0x5a77ed);}});},0x16ffc:(_0x491c9e,_0x5a62ef,_0x44c89e)=>{_0x44c89e['a'](_0x491c9e,async(_0x58df35,_0x589c22)=>{const _0x59ba54=a34_0x4156;try{_0x44c89e['r'](_0x5a62ef),_0x44c89e['d'](_0x5a62ef,{'POST':()=>_0x1f1b0f});var _0x27f76a=_0x44c89e(0x5f0a);_0x44c89e(0xeb06);var _0x1b69ec=_0x44c89e(0x1541e),_0x5b3743=_0x44c89e(0x1368a),_0x191b0f=_0x44c89e(0x9eaa),_0x585e80=_0x58df35([_0x5b3743]);async function _0x1f1b0f(_0x5c0434){const _0x4a9d2f=a34_0x4156;try{let {sessionId:_0x2438bb}=await _0x5c0434['json']();if(!_0x2438bb)return _0x1b69ec[_0x4a9d2f(0xdf)][_0x4a9d2f(0xfe)]({'success':!0x1,'message':_0x4a9d2f(0xff)},{'status':0x190});if((await(0x0,_0x5b3743['Rx'])(_0x2438bb))[_0x4a9d2f(0xe1)])return _0x1b69ec[_0x4a9d2f(0xdf)][_0x4a9d2f(0xfe)]({'success':!0x0});return _0x1b69ec[_0x4a9d2f(0xdf)][_0x4a9d2f(0xfe)]({'success':!0x1,'message':_0x4a9d2f(0xf2)},{'status':0x194});}catch(_0x438528){return _0x1b69ec['NextResponse'][_0x4a9d2f(0xfe)]({'success':!0x1,'message':_0x4a9d2f(0x109)},{'status':0x1f4});}}_0x5b3743=(_0x585e80[_0x59ba54(0x101)]?(await _0x585e80)():_0x585e80)[0x0],(0x0,_0x191b0f['h'])([_0x1f1b0f]),(0x0,_0x27f76a['j'])('5bd1bc45039ff5070c41967bc49585ee2362e57b',_0x1f1b0f),_0x589c22();}catch(_0x2a425c){_0x589c22(_0x2a425c);}});},0xf8cf:(_0x1dc8f3,_0x3dcd55,_0x541990)=>{const _0x987881=_0x3df5c4;_0x541990['d'](_0x3dcd55,{'q':()=>_0x246cb4});let _0x246cb4={'apiKey':_0x987881(0xeb),'authDomain':_0x987881(0xdd),'projectId':_0x987881(0xea),'storageBucket':_0x987881(0xcb),'messagingSenderId':_0x987881(0xfb),'appId':_0x987881(0x116)};},0x1368a:(_0x31ea04,_0x1d68fc,_0x3dd1e8)=>{_0x3dd1e8['a'](_0x31ea04,async(_0x3be185,_0x5d0465)=>{const _0xe568ed=a34_0x4156;try{_0x3dd1e8['d'](_0x1d68fc,{'Rx':()=>_0x2f6554,'Sz':()=>_0x1d409e,'mP':()=>_0x5e4675});var _0x3d82f0=_0x3dd1e8(0x5f0a);_0x3dd1e8(0xeb06);var _0x4d122f=_0x3dd1e8(0x141f5),_0x457549=_0x3dd1e8(0x1695d),_0x171f84=_0x3dd1e8(0x11ce1),_0x5e809c=_0x3dd1e8(0x9eaa),_0x378678=_0x3be185([_0x4d122f,_0x171f84]);async function _0x5e4675(_0x307b4d,_0x335d11,_0x300c49){const _0x1babe=a34_0x4156;let _0x32fddc=await(0x0,_0x4d122f['vc'])(),_0x57c65e=_0x457549['firestore'](_0x32fddc),_0x5e1aa9=_0x57c65e['collection']('play_sessions'),_0x5cd698=_0x5e1aa9[_0x1babe(0xec)](),_0x1ad943=async _0x1ab2f0=>{const _0x53fbcc=_0x1babe;let _0x2dc175=_0x1ab2f0||_0x5cd698['id'];await _0x5e1aa9[_0x53fbcc(0xec)](_0x2dc175)['delete']()[_0x53fbcc(0xf3)](_0x3ba80d=>console[_0x53fbcc(0xdb)](_0x53fbcc(0xc4)+_0x2dc175,_0x3ba80d));};try{return await _0x57c65e[_0x1babe(0xd0)](async _0x2bab3c=>{const _0x354c7d=_0x1babe;let _0x16afdc=_0x171f84[_0x354c7d(0xd4)][_0x354c7d(0xf4)](),_0x123ae9=_0x171f84['Timestamp'][_0x354c7d(0x10f)](_0x16afdc[_0x354c7d(0x117)]()-0x15f90),_0xbe6221=_0x5e1aa9[_0x354c7d(0x10d)](_0x354c7d(0xcf),'==',_0x307b4d),_0x45efae=await _0x2bab3c[_0x354c7d(0xfc)](_0xbe6221),_0x3d9097=[],_0x15c455=[];if(_0x45efae[_0x354c7d(0xd1)](_0x5a9f13=>{const _0x9d1238=_0x354c7d;let _0x441ffe=_0x5a9f13[_0x9d1238(0xca)]();_0x441ffe[_0x9d1238(0xf7)]&&_0x441ffe[_0x9d1238(0xf7)][_0x9d1238(0x117)]()>_0x123ae9[_0x9d1238(0x117)]()?_0x3d9097[_0x9d1238(0x100)](_0x5a9f13):_0x15c455[_0x9d1238(0x100)](_0x5a9f13);}),_0x15c455[_0x354c7d(0xd3)]>0x0&&_0x15c455[_0x354c7d(0xd1)](_0x21f6bc=>_0x2bab3c[_0x354c7d(0xed)](_0x21f6bc[_0x354c7d(0x103)])),_0x3d9097['length']>=0x2)throw Error('LIMIT_EXCEEDED');_0x2bab3c[_0x354c7d(0xee)](_0x5cd698,{'userId':_0x307b4d,'videoId':_0x335d11,'deviceId':_0x300c49,'startedAt':_0x16afdc,'lastHeartbeat':_0x16afdc});}),{'success':!0x0,'message':_0x1babe(0xc2),'sessionId':_0x5cd698['id'],'cleanup':()=>_0x1ad943(_0x5cd698['id'])};}catch(_0x506e76){if('LIMIT_EXCEEDED'===_0x506e76['message'])return{'success':!0x1,'message':_0x1babe(0xc8),'cleanup':async()=>{}};return{'success':!0x1,'message':'세션\x20생성\x20중\x20서버\x20오류가\x20발생했습니다.','cleanup':async()=>{}};}}async function _0x2f6554(_0x5e867a){const _0x37bf37=a34_0x4156;if(!_0x5e867a)return{'success':!0x1};try{let _0x406dac=await(0x0,_0x4d122f['vc'])(),_0x3af08c=_0x457549[_0x37bf37(0xc7)](_0x406dac);return await _0x3af08c[_0x37bf37(0xf0)](_0x37bf37(0x111))['doc'](_0x5e867a)[_0x37bf37(0x102)]({'lastHeartbeat':_0x171f84[_0x37bf37(0xd4)][_0x37bf37(0xf4)]()}),{'success':!0x0};}catch(_0x1d831b){return{'success':!0x1};}}async function _0x1d409e(_0x236998){const _0x30e4b1=a34_0x4156;if(!_0x236998)return{'success':!0x1};try{let _0x4fe8c0=await(0x0,_0x4d122f['vc'])(),_0x468ade=_0x457549['firestore'](_0x4fe8c0);return await _0x468ade[_0x30e4b1(0xf0)](_0x30e4b1(0x111))[_0x30e4b1(0xec)](_0x236998)[_0x30e4b1(0xed)](),{'success':!0x0};}catch(_0xfc43b3){return{'success':!0x1};}}[_0x4d122f,_0x171f84]=_0x378678[_0xe568ed(0x101)]?(await _0x378678)():_0x378678,(0x0,_0x5e809c['h'])([_0x5e4675,_0x2f6554,_0x1d409e]),(0x0,_0x3d82f0['j'])('f69bd0e146d955b222e18875e09a68b26e99e61d',_0x5e4675),(0x0,_0x3d82f0['j'])('783e3fffc62d584389c1934bab17d0b4e76544c7',_0x2f6554),(0x0,_0x3d82f0['j'])('c642ba8d5849a1159d9527d70667c8b7ee48760e',_0x1d409e),_0x5d0465();}catch(_0x5deb80){_0x5d0465(_0x5deb80);}});},0x141f5:(_0x44d02e,_0x100451,_0x133abd)=>{_0x133abd['a'](_0x44d02e,async(_0x3d6777,_0x1eed65)=>{const _0x1bb63c=a34_0x4156;try{_0x133abd['d'](_0x100451,{'Fb':()=>_0x480761,'RI':()=>_0x250732,'vc':()=>_0x5530c5});var _0x4cfccb=_0x133abd(0x5f0a);_0x133abd(0xeb06);var _0xe810a6=_0x133abd(0x1695d),_0x3522ec=_0x133abd(0xcbf),_0x21dd68=_0x133abd(0xf8cf),_0x77acc=_0x133abd(0x14b22),_0x1c24f4=_0x133abd(0x9eaa),_0x4bac73=_0x3d6777([_0x3522ec]);_0x3522ec=(_0x4bac73[_0x1bb63c(0x101)]?(await _0x4bac73)():_0x4bac73)[0x0];let _0xe12c9c='firebase-admin-app-rsc',_0x44f7e2=null;async function _0x250732(){const _0x1a98ee=_0x1bb63c;if(_0x44f7e2)return _0x44f7e2;let _0x1c3f78=process['env']['KEK_SECRET'];if(_0x1c3f78){let _0x3dc627=Buffer[_0x1a98ee(0xf6)](_0x1c3f78,_0x1a98ee(0xfa));try{return function(_0x7f9f58){const _0x312881=_0x1a98ee;if(0x20!==_0x7f9f58[_0x312881(0xd3)])throw Error(_0x312881(0xf9)+_0x7f9f58['length']+'\x20bytes\x20after\x20Base64\x20decoding.');}(_0x3dc627),_0x44f7e2=_0x3dc627;}catch(_0x314226){throw _0x314226;}}throw Error(_0x1a98ee(0xd5));}async function _0x480761(_0x55805d){const _0x3b7350=_0x1bb63c;let _0x2708f3=await _0x250732(),_0x239d81=Buffer['from'](_0x55805d,_0x3b7350(0xfa)),_0x7dbe38=_0x239d81[_0x3b7350(0xe8)](0x0,0xc),_0x5bc541=_0x239d81[_0x3b7350(0xe8)](_0x239d81['length']-0x10),_0x57152e=_0x239d81[_0x3b7350(0xe8)](0xc,_0x239d81[_0x3b7350(0xd3)]-0x10),_0x32292e=_0x77acc['createDecipheriv'](_0x3b7350(0xd2),_0x2708f3,_0x7dbe38);return _0x32292e[_0x3b7350(0xdc)](_0x5bc541),Buffer[_0x3b7350(0x10e)]([_0x32292e[_0x3b7350(0x102)](_0x57152e),_0x32292e[_0x3b7350(0x112)]()]);}async function _0x5530c5(){const _0x4b3f1b=_0x1bb63c;let _0x47d6a3=(0x0,_0x3522ec[_0x4b3f1b(0x105)])()[_0x4b3f1b(0xe0)](_0x3b8a83=>_0x3b8a83['name']===_0xe12c9c);if(_0x47d6a3)return _0x47d6a3;let _0x393e8c={'projectId':process[_0x4b3f1b(0xe2)][_0x4b3f1b(0x10b)],'clientEmail':process[_0x4b3f1b(0xe2)][_0x4b3f1b(0x115)],'privateKey':process[_0x4b3f1b(0xe2)][_0x4b3f1b(0xd8)]?.[_0x4b3f1b(0xf1)](/\\n/g,'\x0a')};if(!_0x393e8c['projectId']||!_0x393e8c[_0x4b3f1b(0xe6)]||!_0x393e8c[_0x4b3f1b(0xf5)])throw Error('Firebase\x20Admin\x20SDK\x20credentials\x20(FIREBASE_PROJECT_ID,\x20FIREBASE_CLIENT_EMAIL,\x20FIREBASE_PRIVATE_KEY)\x20are\x20not\x20set\x20in\x20environment\x20variables.');try{return _0xe810a6['initializeApp']({'credential':_0xe810a6[_0x4b3f1b(0xcd)]['cert'](_0x393e8c),'storageBucket':_0x21dd68['q'][_0x4b3f1b(0x10c)]},_0xe12c9c);}catch(_0x3e2b62){throw Error(_0x4b3f1b(0xc3));}}(0x0,_0x1c24f4['h'])([_0x250732,_0x480761,_0x5530c5]),(0x0,_0x4cfccb['j'])(_0x1bb63c(0xef),_0x250732),(0x0,_0x4cfccb['j'])(_0x1bb63c(0xce),_0x480761),(0x0,_0x4cfccb['j'])(_0x1bb63c(0xe3),_0x5530c5),_0x1eed65();}catch(_0x169314){_0x1eed65(_0x169314);}});}};var _0x161c95=require(_0x3df5c4(0x106));_0x161c95['C'](_0x2752b2);var _0xabdacd=_0x26c3ec=>_0x161c95(_0x161c95['s']=_0x26c3ec),_0x47937=_0x161c95['X'](0x0,[0x22f4,0x1754,0x2095],()=>_0xabdacd(0x11411));module[_0x3df5c4(0xe4)]=_0x47937;})());function a34_0x58f7(){const _0x5b9f4d=['KEK_SECRET\x20is\x20not\x20configured.\x20Cannot\x20decrypt\x20master\x20keys.','594670DwKLRu','323421GtpoPl','FIREBASE_PRIVATE_KEY','(((.+)+)+)+$','next/dist/compiled/next-server/app-page.runtime.prod.js','error','setAuthTag','studio-6929130257-b96ff.firebaseapp.com','/home/user/studio/src/app/api/session/heartbeat/route.ts','NextResponse','find','success','env','6fd1e6976aae4a254e68ad064ca2e7515a4befdb','exports','crypto','clientEmail','104xJiMyL','subarray','toString','studio-6929130257-b96ff','AIzaSyCuXs_szwwsAzEWC_0DAzjJloCLle68ZTI','doc','delete','set','408c1c0e8171b01286df0f1ea44487b1a07b8b72','collection','replace','Session\x20not\x20found\x20or\x20failed\x20to\x20update','catch','now','privateKey','from','lastHeartbeat','228267JsLKjl','Invalid\x20KEK\x20format.\x20Expected\x20a\x2032-byte\x20key,\x20but\x20received\x20','base64','888420412846','get','1583055PhbjFs','json','Session\x20ID\x20is\x20required','push','then','update','ref','apply','getApps','../../../../webpack-runtime.js','ids','search','Internal\x20server\x20error','2610892pdgOkv','FIREBASE_PROJECT_ID','storageBucket','where','concat','fromMillis','2326662VowJck','play_sessions','final','/api/session/heartbeat','3056296CUppxO','FIREBASE_CLIENT_EMAIL','1:888420412846:web:75d82e40765479c8832c3f','toMillis','firebase-admin/firestore','APP_ROUTE','/api/session/heartbeat/route','세션이\x20성공적으로\x20생성되었습니다.','Could\x20not\x20initialize\x20Firebase\x20Admin\x20SDK.\x20Please\x20check\x20your\x20credentials.','Failed\x20to\x20cleanup\x20session\x20','next/dist/compiled/next-server/app-route.runtime.prod.js','constructor','firestore','동시\x20접속\x20가능한\x20기기\x20수(2대)를\x20초과했습니다.\x20다른\x20기기에서\x20재생을\x20중지하고\x20다시\x20시도해주세요.','78DXEdOk','data','studio-6929130257-b96ff.firebasestorage.app','modules','credential','f51d733f122950e1d97c1a94346065295d3cc898','userId','runTransaction','forEach','aes-256-gcm','length','Timestamp'];a34_0x58f7=function(){return _0x5b9f4d;};return a34_0x58f7();}